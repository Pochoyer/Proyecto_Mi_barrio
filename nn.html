<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mapa Mental con Conexiones - Gesti√≥n de Proyectos</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 20px;
      overflow: auto;
    }

    h1, p {
      text-align: center;
      color: #333;
    }

    p {
      max-width: 900px;
      margin: 0 auto;
      color: #555;
    }

    .mindmap-container {
      width: 100%;
      height: 100vh;
      position: relative;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
      overflow: hidden;
      margin-top: 20px;
    }

    .center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #4a6fa5;
      color: white;
      padding: 20px 30px;
      border-radius: 15px;
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      z-index: 10;
      cursor: pointer;
    }

    .branch {
      position: absolute;
      background: #55a8fd;
      color: white;
      padding: 12px 18px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
      cursor: pointer;
      text-align: center;
      white-space: nowrap;
      z-index: 5;
    }

    .branch:hover {
      background: #3a89e0;
      transform: scale(1.08);
    }

    .sub-branch {
      margin-top: 6px;
      margin-bottom: 6px;
      padding: 8px 12px;
      background: #87c3f0;
      font-size: 14px;
      border-left: 3px solid #55a8fd;
    }

    .dropdown {
      display: none;
      position: absolute;
      background: white;
      border-radius: 8px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      min-width: 220px;
      z-index: 100;
      padding: 10px 0;
    }

    /* Posiciones de ramas */
    .b1 { top: 30%; left: 15%; }
    .b2 { top: 50%; left: 15%; }
    .b3 { top: 70%; left: 15%; }
    .b4 { top: 20%; left: 40%; }
    .b5 { top: 30%; left: 75%; }
    .b6 { top: 50%; left: 75%; }
    .b7 { top: 70%; left: 75%; }
    .b8 { top: 80%; left: 40%; }
    .b9 { top: 85%; left: 55%; }

    /* SVG para conexiones */
    svg.connections {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none; /* Permite que los clics pasen al mapa */
      z-index: 2;
    }

    svg line {
      stroke: #e74c3c;
      stroke-width: 2;
      marker-end: url(#arrowhead);
    }

    svg text.label {
      font-size: 11px;
      fill: #c0392b;
      font-weight: bold;
      pointer-events: none;
    }
  </style>
</head>
<body>

  <h1>üåü Mapa Mental: Gesti√≥n de Proyectos</h1>
  <p>Enfoque: Programaci√≥n Orientada a Objetos + Datos Geoespaciales + Visualizaci√≥n<br>
  <strong>Conexiones cruzadas</strong> entre √°reas t√©cnicas y de gesti√≥n.</p>

  <div class="mindmap-container" id="container">

    <!-- Flecha SVG -->
    <svg class="connections" id="svg"></svg>
    <defs>
      <marker id="arrowhead" markerWidth="10" markerHeight="7" 
              refX="10" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
      </marker>
    </defs>

    <!-- Nodo Central -->
    <div class="center" id="center">Gesti√≥n de Proyectos</div>

    <!-- Rama 1: Planificaci√≥n -->
    <div class="branch b1" id="planificacion">1Ô∏è‚É£ Planificaci√≥n y Requisitos</div>
    <div class="dropdown">
      <div class="sub-branch">Backlog</div>
      <div class="sub-branch">Product Backlog</div>
      <div class="sub-branch">Elicitar requerimientos</div>
    </div>

    <!-- Rama 2: Desarrollo -->
    <div class="branch b2" id="desarrollo">2Ô∏è‚É£ Desarrollo y Prototipado</div>
    <div class="dropdown">
      <div class="sub-branch">Wireframe</div>
      <div class="sub-branch">Mockup</div>
      <div class="sub-branch">Prototipado evolutivo</div>
    </div>

    <!-- Rama 3: Versiones -->
    <div class="branch b3" id="versiones">3Ô∏è‚É£ Control de Versiones</div>
    <div class="dropdown">
      <div class="sub-branch">Repositorio</div>
      <div class="sub-branch">Ramas</div>
      <div class="sub-branch">Merge</div>
    </div>

    <!-- Rama 4: Geoespaciales -->
    <div class="branch b4" id="geoespaciales">4Ô∏è‚É£ Datos Geoespaciales</div>
    <div class="dropdown">
      <div class="sub-branch">GeoJSON</div>
      <div class="sub-branch">Cesium.JS</div>
      <div class="sub-branch">Open Simulator</div>
    </div>

    <!-- Rama 5: Anal√≠tica -->
    <div class="branch b5" id="analitica">5Ô∏è‚É£ Anal√≠tica y Estad√≠stica</div>
    <div class="dropdown">
      <div class="sub-branch">Estad√≠stica descriptiva</div>
      <div class="sub-branch">Estad√≠stica proyectiva</div>
    </div>

    <!-- Rama 6: IA Geoespacial -->
    <div class="branch b6" id="ia">6Ô∏è‚É£ Inteligencia Artificial Geoespacial</div>
    <div class="dropdown">
      <div class="sub-branch">Clasificaci√≥n</div>
      <div class="sub-branch">Pron√≥stico</div>
      <div class="sub-branch">Segmentaci√≥n sem√°ntica</div>
    </div>

    <!-- Rama 7: Librer√≠as -->
    <div class="branch b7" id="librerias">7Ô∏è‚É£ Librer√≠as y Herramientas</div>
    <div class="dropdown">
      <div class="sub-branch">Scikit-learn</div>
      <div class="sub-branch">Keras</div>
      <div class="sub-branch">Pandas</div>
    </div>

    <!-- Rama 8: Visualizaci√≥n -->
    <div class="branch b8" id="visualizacion">8Ô∏è‚É£ Visualizaci√≥n</div>
    <div class="dropdown">
      <div class="sub-branch">Cesium.JS</div>
      <div class="sub-branch">Pol√≠gono de extrusi√≥n</div>
      <div class="sub-branch">BIM</div>
      <div class="sub-branch">Tiles</div>
    </div>

    <!-- Rama 9: Infraestructura -->
    <div class="branch b9" id="infra">üîó Infraestructura</div>
    <div class="dropdown">
      <div class="sub-branch">CDN</div>
    </div>
  </div>

  <script>
    function toggleBranch(element) {
      const allDropdowns = document.querySelectorAll('.dropdown');
      const allBranches = document.querySelectorAll('.branch');
      allDropdowns.forEach(d => {
        if (d.previousElementSibling === element) {
          d.style.display = d.style.display === 'block' ? 'none' : 'block';
        } else {
          d.style.display = 'none';
        }
      });
    }

    // Conexiones SVG
    function drawConnections() {
      const svg = document.getElementById('svg');
      const container = document.getElementById('container');
      const scale = 1;

      function getCenter(el) {
        const rect = el.getBoundingClientRect();
        const contRect = container.getBoundingClientRect();
        return {
          x: rect.left - contRect.left + rect.width / 2,
          y: rect.top - contRect.top + rect.height / 2
        };
      }

      // Lista de conexiones: [fromId, toId, label, offsetFrom = 0, offsetTo = 0]
      const connections = [
        ['geoespaciales', 'analitica', 'Datos ‚Üí An√°lisis'],
        ['analitica', 'ia', 'Base para modelos'],
        ['ia', 'librerias', 'Implementaci√≥n'],
        ['librerias', 'analitica', 'Procesamiento'],
        ['librerias', 'ia', 'Keras ‚Üí Segmentaci√≥n'],
        ['geoespaciales', 'visualizacion', 'Cesium.JS'],
        ['visualizacion', 'ia', 'Visualizaci√≥n de resultados'],
        ['visualizacion', 'infra', 'Tiles ‚Üí CDN'],
        ['desarrollo', 'planificacion', 'Prototipo ‚Üê Backlog'],
        ['ia', 'visualizacion', 'Resultados en 3D'],
        ['visualizacion', 'bim', 'BIM + Extrusi√≥n'],
        ['librerias', 'visualizacion', 'Pandas ‚Üí Datos'],
      ];

      connections.forEach(conn => {
        const from = document.getElementById(conn[0]);
        const to = document.getElementById(conn[1]);
        if (!from || !to) return;

        const c1 = getCenter(from);
        const c2 = getCenter(to);

        const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
        line.setAttribute("x1", c1.x + conn[3] || 0);
        line.setAttribute("y1", c1.y + (conn[3] ? 10 : 0));
        line.setAttribute("x2", c2.x + (conn[4] || 0));
        line.setAttribute("y2", c2.y + (conn[4] ? -10 : 0));
        svg.appendChild(line);

        // Etiqueta en el punto medio
        const label = document.createElementNS("http://www.w3.org/2000/svg", "text");
        label.setAttribute("x", (c1.x + c2.x) / 2);
        label.setAttribute("y", (c1.y + c2.y) / 2 - 10);
        label.setAttribute("class", "label");
        label.textContent = conn[2];
        svg.appendChild(label);
      });
    }

    // Dibujar conexiones al cargar
    window.addEventListener('load', drawConnections);
    window.addEventListener('resize', () => {
      document.getElementById('svg').innerHTML = '';
      drawConnections();
    });
  </script>

</body>
</html>